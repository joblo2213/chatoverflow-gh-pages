



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.6.0">
    
    
      
        <title>Writing a plugin - Chatoverflow</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.1b62728e.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.268332fc.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#create-a-new-plugin-project" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="Chatoverflow" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Chatoverflow
            </span>
            <span class="md-header-nav__topic">
              
                Writing a plugin
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="Chatoverflow" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Chatoverflow
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      Development
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Development
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../Adding-a-new-platform-source/" title="Adding a new platform source" class="md-nav__link">
      Adding a new platform source
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Deploy-ChatOverflow/" title="Deploy ChatOverflow" class="md-nav__link">
      Deploy ChatOverflow
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Pluggable-migration-guide/" title="Pluggable migration guide" class="md-nav__link">
      Pluggable migration guide
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Release-ChatOverflow/" title="Release ChatOverflow" class="md-nav__link">
      Release ChatOverflow
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Setting-up-the-Build-Environment/" title="Setting up the Build Environment" class="md-nav__link">
      Setting up the Build Environment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Structure/" title="Structure" class="md-nav__link">
      Structure
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Versioning/" title="Versioning" class="md-nav__link">
      Versioning
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Working-with-NPM/" title="Working with NPM" class="md-nav__link">
      Working with NPM
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Writing a plugin
      </label>
    
    <a href="./" title="Writing a plugin" class="md-nav__link md-nav__link--active">
      Writing a plugin
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#create-a-new-plugin-project" class="md-nav__link">
    Create a new plugin project
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#inspect-the-pluginxml-file" class="md-nav__link">
    Inspect the plugin.xml file
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extend-the-plugin-with-own-logic" class="md-nav__link">
    Extend the Plugin with own logic
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Services
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Services
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../services/Discord/" title="Discord" class="md-nav__link">
      Discord
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../services/File/" title="File" class="md-nav__link">
      File
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../services/RCON/" title="RCON" class="md-nav__link">
      RCON
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../services/Sample/" title="Sample" class="md-nav__link">
      Sample
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../services/Serial/" title="Serial" class="md-nav__link">
      Serial
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../services/StreamElements/" title="StreamElements" class="md-nav__link">
      StreamElements
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../services/TipeeeStream/" title="TipeeeStream" class="md-nav__link">
      TipeeeStream
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../services/Twitch-Chat/" title="Twitch Chat" class="md-nav__link">
      Twitch Chat
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Usage
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Usage
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../usage/Frequent-Issues/" title="Frequent Issues" class="md-nav__link">
      Frequent Issues
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../usage/Installation/" title="Installation" class="md-nav__link">
      Installation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../usage/Using-Parameters/" title="Using Parameters" class="md-nav__link">
      Using Parameters
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../usage/Using-the-CLI/" title="Using the CLI" class="md-nav__link">
      Using the CLI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../usage/Using-the-GUI/" title="Using the GUI" class="md-nav__link">
      Using the GUI
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#create-a-new-plugin-project" class="md-nav__link">
    Create a new plugin project
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#inspect-the-pluginxml-file" class="md-nav__link">
    Inspect the plugin.xml file
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extend-the-plugin-with-own-logic" class="md-nav__link">
    Extend the Plugin with own logic
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>Writing a plugin</h1>
                
                <p><strong>Important: Chat Overflow is still work in progress. So this guide will probably change in the future!</strong></p>
<p>There are 3 important steps when you want to create and implement a new chat overflow plugin:</p>
<ol>
<li>Create a new plugin project with the commands of the framework</li>
<li>Inspect the <code>plugin.xml</code> file</li>
<li>Extend the plugin with own logic</li>
</ol>
<h2 id="create-a-new-plugin-project">Create a new plugin project</h2>
<p>Use the <em>Create Plugin</em> run configuration or start the custom task <code>sbt create</code> directly. Enter the basic plugin information in the command prompt. This includes mandatory values like the name, author, version and base plugin folder (e.g. <code>plugins-public</code>) and some optional values like a description, a website, a link to a source repo, a link to a bug tracker and a license.</p>
<p>The command creates the folder structure of the new plugin and adds a basic build file. Here you can also add custom dependencies. In addition the command generates a basic <code>plugin.xml</code> containing all the passed information like name and description and a basic source code file generated in the language of your choice to get you started. Note that currently only Scala and Java are supported.</p>
<p>Next, run the custom task <code>sbt fetch</code> to let the framework look for new plugins and update the plugin reference file <code>plugins.sbt</code>. If you're using IntelliJ, you can now reload the framework manually to register the plugin as a new custom project. You should also run <code>sbt reload</code> (Yes, both actions have different effects although they shouldn't).</p>
<h2 id="inspect-the-pluginxml-file">Inspect the <code>plugin.xml</code> file</h2>
<p>All the metadata of the plugin like the name and the author of the plugin is saved in a xml file which is located at <code>src/main/resources/plugin.xml</code> in the plugin directory. This file gets autogenerated by the create command, but in case you need to update a value its good to know where this file is located.</p>
<p>A simple version of the <code>plugin.xml</code> file might look like this:</p>
<p><code>xml
&lt;plugin&gt;
    &lt;name&gt;Demonstration&lt;/name&gt;
    &lt;author&gt;sebinside&lt;/author&gt;
    &lt;description&gt;This is a simple plugin for demonstration purposes.&lt;/description&gt;
    &lt;api&gt;
        &lt;major&gt;3&lt;/major&gt;
        &lt;minor&gt;0&lt;/minor&gt;
    &lt;/api&gt;
    &lt;version&gt;0.3.0&lt;/version&gt;
    &lt;website&gt;http://codeoverflow.org&lt;/website&gt;
    &lt;sourceRepo&gt;https://github.com/codeoverflow-org/chatoverflow-plugins&lt;/sourceRepo&gt;
    &lt;bugtracker&gt;https://github.com/codeoverflow-org/chatoverflow/issues&lt;/bugtracker&gt;
    &lt;license&gt;EPL-2.0&lt;/license&gt;
&lt;/plugin&gt;</code></p>
<p>The properties called name, author, api versions and version are mandatory and the framework won't load the plugin, if one of these is missing. All others are optional information for the user. If you don't want to specify a value for those you can just omit them.</p>
<p>The api tag contains the API-Version, which your plugin uses. These are evaluated in the loading process to ensure that your plugin works with the framework version from the user. You can get these numbers either from <code>org.codeoverflow.chatoverflow.api.APIVersion</code> in the api project or in the <code>build.sbt</code> also in the api project.</p>
<h2 id="extend-the-plugin-with-own-logic">Extend the Plugin with own logic</h2>
<p>The last step is the creation of the plugin class, which contains your own plugin logic. Again the create command has autogenerated a basic class extending <code>org.codeoverflow.chatoverflow.api.plugin.PluginImpl</code> in the language of your choice. Such a file might look like this in case of Scala:</p>
<pre><code class="scala">import org.codeoverflow.chatoverflow.api.plugin.{PluginImpl, PluginManager}

class DemonstrationPlugin(manager: PluginManager) extends PluginImpl(manager) {

  // require more requirements as needed here
  private val sampleReq = require.input.sample(&quot;sampleReq&quot;, &quot;Sample requirement&quot;, true)

  // you can adjust the loop interval here
  // loopInterval = 1000;

  /**
    * The setup method is executed one, when the plugin is started. Do NOT define your requirements in here!
    */
  override def setup(): Unit = {
    log(&quot;Initialized Demonstration!&quot;)
  }

  /**
    * The loop method is executed in loop with a specified interval until the shutdown method is called.
    * The loop method is NOT executed if a negative loop interval is set.
    */
  override def loop(): Unit = {
    log(&quot;Demonstration loop!&quot;)
  }

  /**
    * The shutdown method should contain logic to close everything.
    */
  override def shutdown(): Unit = {
    log(&quot;Shutting down Demonstration!&quot;)
  }
}
</code></pre>

<p>The framework searches for a class implementing <code>org.codeoverflow.chatoverflow.api.plugin.Plugin</code> when it tries to load a plugin. <code>PluginImpl</code> does this for you and also decreases some other boilerplate. Note that the whole plugin is only allowed to have <em>exactly</em> one class implementing <code>Plugin</code> otherwise the framework won't load your plugin.</p>
<p>All methods in the generated class are pretty self explaining. The only thing we might need to talk about are <em>Requirements</em>: These are used to retrieve data from the outside world and returning information to it. Basically, you can require everything from a single parameter set by the user to full access to a users livestream chat.</p>
<p>Thanks to <code>PluginImpl</code> a requirements object is already created, meaning you can start adding requirements right away. Here is a example:</p>
<pre><code class="scala">private val twitchChatInput = require.input.twitchChat(&quot;reqTwitch&quot;, &quot;A twitch channel&quot;, false)
private val nameToSayHelloTo = require.parameter.string(&quot;reqHello&quot;, &quot;Your name&quot;, false)
</code></pre>

<p>This code requires read access to a twitch livestream chat and a parameter ("<em>a name to say hello to"</em>). Note: You can obviously not specify which channel the user might choose - but you can be sure that you will get a working input. The framework takes care of that.</p>
<p>After this, the last step is the <code>start</code> method. And it is as easy as you might think: Just add your own logic now, using the required parameters of your Requirement object. Here is a short example: This code will simply print out all messages from a twitch chat to the console. To access the chat, use the <code>get()</code> method on the requirement.</p>
<pre><code class="scala">twitchChatInput.get().registerMessageHandler(msg =&gt; println(msg))
</code></pre>

<p>Of course, you can also add own classes and infrastructure by now - the important steps are done, happy coding!</p>
<p><em>One last note: If you are testing your plugin for the first time, a full reload might be needed. Use the custom task <code>[Advanced] Full Reload and run ChatOverflow</code> to do so. Afters this, you can configure the framework to start your plugin using the <a href="usage/Using-the-CLI.md">CLI</a>!</em></p>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../Working-with-NPM/" title="Working with NPM" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Working with NPM
              </span>
            </div>
          </a>
        
        
          <a href="../../services/Discord/" title="Discord" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Discord
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.808e90bb.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
  </body>
</html>